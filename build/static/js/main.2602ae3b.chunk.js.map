{"version":3,"sources":["componets/PersonForm.js","componets/Persons.js","componets/Filter.js","services/personsService.js","componets/Notification.js","App.js","serviceWorker.js","index.js"],"names":["PersonForm","handleNameChange","handleNumberChange","addNewName","newName","newNumber","onSubmit","value","onChange","type","Person","person","handleClickDelete","name","number","onClick","e","preventDefault","id","Persons","persons","map","key","Filter","filterExp","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","style","className","App","useState","setPersons","setNewName","setNewNumber","setFilterExp","notificationMessage","setNotificationMessage","notificationStyle","setNotificationStyle","useEffect","personService","console","log","removePersonLocally","array","index","indexOf","splice","event","target","includes","window","confirm","personToUpdate","find","p","changedPerson","catch","error","setTimeout","concat","pattern","RegExp","filteredPersonsCopy","forEach","test","push","filterHandle","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2602ae3b.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = ({handleNameChange, handleNumberChange, addNewName, newName, newNumber}) => {\n\n    return (\n        <form onSubmit={addNewName}>\n            <div>\n                name: <input value={newName} onChange={handleNameChange}/>\n            </div>\n            <div>\n                number: <input value={newNumber} onChange={handleNumberChange}/>\n            </div>\n\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\n\nconst Person = ({person, handleClickDelete}) => {\n    return (\n        <div>\n            {person.name} {person.number} <button onClick={(e) => {e.preventDefault(); handleClickDelete(person.id, person.name)}}>delete</button>\n        </div>\n    )\n}\n\nconst Persons = ({persons, handleClickDelete}) => {\n\n    return (\n        <div>\n            {persons.map(person => <Person key={person.id} person={person} handleClickDelete={handleClickDelete}/>)}\n        </div>\n    )\n}\n\nexport default Persons","import React from 'react'\n\nconst Filter = ({filterExp, handleFilterChange}) => {\n    return (\n        <div>\n            filter shown with <input value={filterExp} onChange={handleFilterChange}/>\n        </div>\n    )\n}\n\nexport default Filter","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteItem = id => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default {getAll, create, update, deleteItem}\n","import React from 'react'\n\nconst Notification = ({ message, style }) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className={style}>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","import React, {useState, useEffect} from 'react'\nimport PersonForm from \"./componets/PersonForm\";\nimport Persons from \"./componets/Persons\";\nimport Filter from \"./componets/Filter\";\nimport personService from './services/personsService'\nimport Notification from \"./componets/Notification\";\n\nconst App = () => {\n\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [filterExp, setFilterExp] = useState('')\n    const [notificationMessage, setNotificationMessage] = useState(null)\n    const [notificationStyle, setNotificationStyle] = useState(null)\n\n    useEffect(() => {\n        personService\n            .getAll()\n            .then(response => {\n                console.log('promise fulfilled', response)\n                setPersons(response)\n            })\n    }, [])\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value)\n    };\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value)\n    };\n\n    const handleFilterChange = (event) => {\n        setFilterExp(event.target.value)\n    }\n\n    const handleClickDelete = (id, name) => {\n        if (window.confirm(`Delete ${name} from phonebook?`)) {\n            personService\n                .deleteItem(id)\n                .then(() => {\n                    removePersonLocally(name)\n                    console.log('deleted')\n                })\n                .catch(error => {\n                    console.log(error)\n                    removePersonLocally(name)\n                    setNotificationMessage(\n                        `Information of ${newName} has already been removed from the server`\n                    )\n                    setNotificationStyle(\"error\")\n                    setTimeout(() => {\n                        setNotificationMessage(null)\n                        setNotificationStyle(null)\n                    }, 5000)\n                })\n        }\n    }\n\n    const addNewName = (event) => {\n        console.log('onSubmit called')\n        event.preventDefault()\n\n        if (!persons.map(person => person.name).includes(newName)) {\n            const personObject = {\n                name: newName,\n                number: newNumber\n            }\n\n            personService\n                .create(personObject)\n                .then(response => {\n                    console.log(response)\n                    setPersons(persons.concat(response))\n                    setNewName('')\n                    setNewNumber('')\n                })\n                .then(() => {\n                    setNotificationMessage(\n                        `${newName} added to the phonebook`\n                    )\n                    setNotificationStyle(\"notification\")\n                    setTimeout(() => {\n                        setNotificationMessage(null)\n                        setNotificationStyle(null)\n                    }, 5000)\n                })\n                .catch(error => {\n                    console.log('Error', error)\n                })\n        } else if (window.confirm(`${newName} is already in phonebook, replace the old number with new one?`)) {\n            const personToUpdate = persons.find(p => p.name === newName)\n            const changedPerson = { ...personToUpdate, number: newNumber}\n            personService\n                .update(personToUpdate.id, changedPerson)\n                .catch(error => {\n                    console.log(error)\n                    setNotificationMessage(\n                        `Information of ${newName} has already been removed from the server`\n                    )\n                    setNotificationStyle(\"error\")\n                    setTimeout(() => {\n                        setNotificationMessage(null)\n                        setNotificationStyle(null)\n                    }, 5000)\n                })\n                .then(() => {\n                    personService.getAll()\n                        .then(response => {\n                            setPersons(response)\n                        })\n                    setNewName('')\n                    setNewNumber('')\n                })\n\n        }\n    };\n\n    const filterHandle = () => {\n        let pattern = new RegExp(filterExp, 'i')\n        let filteredPersonsCopy = []\n\n        persons.forEach((person) => {\n            if (pattern.test(person.name) | pattern.test(person.number)) filteredPersonsCopy.push(person)\n        })\n\n        return filteredPersonsCopy\n    }\n\n    const removePersonLocally = (e) => {\n        let array = [...persons];\n        console.log(e)\n        let index = array.map(e => e.name).indexOf(e);\n        if (index !== -1) {\n            array.splice(index, 1);\n            setPersons(array);\n        }\n    }\n\n    console.log('rendering app...')\n\n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n\n            <Notification message={notificationMessage} style={notificationStyle} />\n\n            <Filter handleFilterChange={handleFilterChange}\n                    filterExp={filterExp}/>\n\n            <h2>add a new</h2>\n            <PersonForm handleNameChange={handleNameChange}\n                        handleNumberChange={handleNumberChange}\n                        addNewName={addNewName}\n                        newName={newName}\n                        newNumber={newNumber}/>\n\n            <h2>Numbers</h2>\n            <Persons persons={filterHandle()}\n                     handleClickDelete={handleClickDelete}/>\n        </div>\n    )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}